<launch>
    <param name="deformable_type"               value="cloth"/>
    <param name="task_type"                     value="cloth_single_pole"/>
    <param name="disable_all_visualizations"    value="false"/>

    <param name="default_deformability"         value="14.0"/>
    <param name="collision_scaling_factor"      value="1000.0"/>
    <param name="stretching_threshold"          value="$(eval (0.012 + 0.002) / 0.012)"/>
    <param name="max_time"                      value="20.0"/>

    <!-- Table size params -->
    <arg name="table_x_half_extents"    value="0.095"/>
    <arg name="table_y_half_extents"    value="0.24"/>
    <arg name="table_height"            value="0.2005"/>
    <arg name="table_thickness"         value="0.05"/>

    <param name="table_x_half_extents"  value="$(arg table_x_half_extents)"/>
    <param name="table_y_half_extents"  value="$(arg table_y_half_extents)"/>
    <param name="table_height"          value="$(arg table_height)"/>
    <param name="table_thickness"       value="$(arg table_thickness)"/>

    <!-- Table position params -->
    <arg name="table_leading_edge_x"    value ="-0.185"/>

    <arg name="table_surface_x"         value="$(eval table_leading_edge_x - table_x_half_extents)"/>
    <arg name="table_surface_y"         value="0.0"/>
    <arg name="table_surface_z"         value="$(arg table_height)"/>

    <param name="table_surface_x"       value="$(arg table_surface_x)"/>
    <param name="table_surface_y"       value="$(arg table_surface_y)"/>
    <param name="table_surface_z"       value="$(arg table_surface_z)"/>


    <!-- Cloth properties params -->
    <param name="cloth_linear_stiffness"        value="0.8"/>

    <!-- Cloth size params -->
    <arg name="cloth_x_size"                    value="0.3"/>
    <arg name="cloth_y_size"                    value="0.5"/>
    <arg name="cloth_num_control_points_x"      value="30"/>
    <arg name="cloth_num_control_points_y"      value="50"/>

    <param name="cloth_x_size"                  value="$(arg cloth_x_size)"/>
    <param name="cloth_y_size"                  value="$(arg cloth_y_size)"/>
    <param name="cloth_num_control_points_x"    value="$(arg cloth_num_control_points_x)"/>
    <param name="cloth_num_control_points_y"    value="$(arg cloth_num_control_points_y)"/>

    <!-- Cloth position params -->
    <arg name="cloth_leading_edge_x"    value="0.06"/>

    <param name="cloth_com_x"           value="$(eval cloth_leading_edge_x + (cloth_x_size / 2.0))"/>
    <param name="cloth_com_y"           value="0.0"/>
    <param name="cloth_com_z"           value="$(eval table_surface_z + 0.1)"/>


    <!-- Obstacle parameters -->
    <param name="cloth_cylinder_com_x"  value="0.0"/>
    <param name="cloth_cylinder_com_y"  value="0.0"/>
    <param name="cloth_cylinder_com_z"  value="0.32"/>

    <param name="cloth_cylinder_height" value="0.7"/>
    <param name="cloth_cylinder_radius" value="0.04"/>



    <!-- World parameters for planning -->
    <arg name="grid_resolution"         value="0.02"/>

    <param name="world_x_step"          value="$(arg grid_resolution)"/>
    <param name="world_x_min"           value="-0.4"/>
    <param name="world_x_max"           value="0.4"/>

    <param name="world_y_step"          value="$(arg grid_resolution)"/>
    <param name="world_y_min"           value="-0.3"/>
    <param name="world_y_max"           value="0.3"/>

    <param name="world_z_step"          value="$(arg grid_resolution)"/>
    <param name="world_z_min"           value="$(eval table_height - 0.22)"/>
    <param name="world_z_max"           value="$(eval table_height + 0.2)"/>

    <group ns="smmap_planner_node">
        <param name="error_threshold_along_normal"          value="0.02"/>
        <param name="error_threshold_distance_to_normal"    value="0.006"/>
        <param name="error_threshold_task_done"             value="0.1"/>

        <param name="max_pose_history_steps"                            value="80"/>
        <param name="error_delta_threshold_for_progress"                value="1.0"/>
        <param name="grippers_distance_delta_threshold_for_progress"    value="0.03"/>

        <param name="rrt_reuse_old_results"                 value="true"/>
        <param name="rrt_store_new_results"                 value="true"/>
        <param name="rrt_min_gripper_distance_to_obstacles" value="0.023"/> <!--Needs to be larger than grid resolution-->
        <param name="rrt_max_shortcut_index_distance"       value="100"/>
        <param name="rrt_max_smoothing_iterations"          value="500"/>
        <param name="rrt_max_failed_smoothing_iterations"   value="250"/>
    </group>

    <group ns="deform_simulator_node">
        <param name="num_simsteps_per_gripper_command"  value="10"/>
    </group>
</launch>
